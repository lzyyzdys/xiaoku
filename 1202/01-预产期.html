<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<p>系统时间:<span class="xtsj"></span></p>
		<!-- 怀润的日期+38*7(266) = 预产期 -->
		<p>自动计算预产期</p>
		<p>请录入时间：<input type="date" onChange="daima(this)"/></p>
		<p>预产期为：<input class="yc" /></p>
		<p>小宝宝的年龄：<span class="tian"></span></p>
		
		<p>我还要继续辛苦：<span class="xk">0</span>天</p>
	</body>
</html>
<script>
	
	setInterval(xxxx,1000);
	function xxxx(){
		let xtsj = getDateAndTime(new Date())
		let oxt = document.querySelector(".xtsj");
		oxt.innerHTML = xtsj;
	}
	
	function daima(t){
		let z = t.value;
		let sj = new Date(z).getTime()+266*24*3600*1000;
		sj = new Date(sj);
		sj = getDate(sj);
		let yc = document.querySelector(".yc");
		yc.value = sj;
		
		
		// 计算宝宝在肚子里玩了多少天   z:2018-8-8
		let hm = new Date().getTime()-new Date(z).getTime()
		let tt = hm/1000/3600/24
		tt = parseInt(tt);
		let zhou = tt/7;
		let zhouInt = parseInt(zhou);
		let tian = tt % 7;
		let ot = document.querySelector(".tian");
		ot.innerHTML = zhouInt + "周" + tian +"天";
		
		
		// 灭亡的时间
		let xz = new Date(z);  
		//百年之后的日期
		 bnxz = getDate100(xz);  //xx-xx-xx
		 let centerTian = getMtian(new Date(bnxz),xz);		//一共
		 let yh = getMtian(new Date(),xz);	//已活
		 let xk = document.querySelector(".xk");
		 xk.innerHTML = centerTian-yh;
		 
	}
	//当别人选好了日期
	//获取他的日期
	//然后+266天
	//然后将结果写到预产期的input里面去
	
	function getMtian(date1,date2){
		let a = (date1.getTime()-date2.getTime())/1000/3600/24;
		return parseInt(a);
	}
	
	function getDate(date){
		let year = date.getFullYear();
		//如何获取月份呢
		let month = date.getMonth()+1;
		//如何获取天数呢
		let day = date.getDate();
		return year+"-"+month+"-"+day;
	}
	
	function getDateAndTime(date){
		let year = date.getFullYear();
		//如何获取月份呢
		let month = date.getMonth()+1;
		//如何获取天数呢
		let day = date.getDate();
		return year+"-"+month+"-"+day+" " +date.getHours() + ":"+date.getMinutes()+":"+date.getSeconds();
	}
	
	function getDate100(date){
		let year = date.getFullYear() + 100;
		//如何获取月份呢
		let month = date.getMonth()+1;
		//如何获取天数呢
		let day = date.getDate();
		return year+"-"+month+"-"+day;
	}
</script>
